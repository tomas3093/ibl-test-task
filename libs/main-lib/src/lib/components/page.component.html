<div
  class="flex flex-col w-full md:w-[700px] mx-auto rounded bg-white p-4 my-8"
>
  <form
    [formGroup]="form"
    novalidate
    class="grid grid-cols-1 md:grid-cols-8 gap-y-1 md:gap-y-4"
  >
    <div class="md:col-span-2 text-sm md:text-base text-gray-700 self-center">
      Message Types
    </div>
    <div class="md:col-span-6 flex flex-row">
      <div *ngFor="let type of messageTypes; let i = index" class="mr-4">
        <input
          #check
          type="checkbox"
          class="cursor-pointer"
          [ngClass]="{
            'outline outline-2 outline-red-500': showTypesEmptyError | async
          }"
          [value]="type.value"
          (change)="onCheckboxChange($event)"
        />
        <span (click)="check.click()" class="ml-1 cursor-pointer">{{
          type.name
        }}</span>
      </div>
    </div>
    <div
      class="md:col-span-2 mt-3 md:mt-0 text-sm md:text-base text-gray-700 self-center"
    >
      Airports
    </div>
    <input
      formControlName="airports"
      type="text"
      (input)="formReset()"
      [ngClass]="{
        'outline outline-2 outline-red-500': showAirportsFieldInvalid | async
      }"
      class="md:col-span-6 border border-gray-600 rounded w-full p-2 outline outline-0"
    />
    <div
      class="md:col-span-2 mt-3 md:mt-0 text-sm md:text-base text-gray-700 self-center"
    >
      Countries
    </div>
    <input
      formControlName="countries"
      type="text"
      (input)="formReset()"
      [ngClass]="{
        'outline outline-2 outline-red-500': showCountriesFieldInvalid | async
      }"
      class="md:col-span-6 border border-gray-600 rounded w-full p-2 outline outline-0"
    />
  </form>

  <div *ngIf="showError | async" class="mt-4 px-4 text-red-500 font-semibold">
    <span *ngIf="showTypesEmptyError | async"
      >Message type is required, select at least one value.</span
    >
    <span *ngIf="showAirportsEmptyError | async">Airports is required.</span>
    <span *ngIf="showAirportsPatternError | async"
      >Airports is in wrong format, value should consist of 4 uppercase letters.
      Multiple values must be separated with space.</span
    >
    <span *ngIf="showCountriesEmptyError | async">Countries is required.</span>
    <span *ngIf="showCountriesPatternError | async"
      >Countries is in wrong format, value should consist of 2 uppercase
      letters. Multiple values must be separated with space.</span
    >
  </div>

  <button
    (click)="submit()"
    class="bg-gray-600 text-white py-2 px-6 mt-6 rounded md:ml-auto hover:bg-gray-700 focus:outline-0"
  >
    Create briefing
  </button>

  <ng-container>
    <ngx-skeleton-loader
      *ngIf="loading | async"
      count="3"
      [theme]="{ height: '24px', margin: 0 }"
      class="hidden md:block w-full md:w-3/4 mt-6"
    ></ngx-skeleton-loader>
    <div *ngIf="result | async as res" class="mt-6">{{ res | json }}</div>
  </ng-container>
</div>
